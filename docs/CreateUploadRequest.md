# CreateUploadRequest

Request to generate a presigned URL for direct S3 upload.  ⚠️  ⚠️  ⚠️  THIS IS THE PRESIGNED URL SYSTEM ⚠️  ⚠️  ⚠️  This endpoint (POST /buckets/{id}/uploads) is the COMPLETE presigned URL system. It handles: - ✅ Presigned URL generation (S3 PUT URLs) - ✅ Upload tracking and status management - ✅ Validation (quotas, file size, content type, schema) - ✅ Duplicate detection - ✅ Auto object creation on confirmation - ✅ Returns upload_id for later reference  DO NOT CREATE A NEW PRESIGNED UPLOAD ENDPOINT! If you need presigned URLs, use this existing system.  If you think you need a new endpoint: 1. Check if this system already does it (it probably does) 2. Extend this system instead of creating redundancy 3. See api/buckets/uploads/services.py for implementation  Integration Points: - Object creation: Use upload_id in CreateBlobRequest.upload_id field - See: shared/buckets/objects/blobs/models.py::CreateBlobRequest - See: api/buckets/objects/canonicalization.py::resolve_upload_reference()  Workflow: 1. POST /buckets/{id}/uploads → Returns presigned_url + upload_id 2. PUT presigned_url with file content (client uploads directly to S3) 3. POST /uploads/{upload_id}/confirm → REQUIRED to finalize upload 4. Object is created automatically (default behavior)  ⚠️  IMPORTANT: Step 3 (confirm) is REQUIRED! S3 presigned URLs have no callback mechanism - the API cannot detect when your upload to S3 completes. You MUST call the confirm endpoint to: - Verify the file exists in S3 - Validate integrity (ETag/size) - Create the bucket object - Mark upload as COMPLETED  If you don't confirm: - Upload stays in PENDING status forever - No object is created - File exists in S3 but is orphaned - Presigned URL expires (default: 1 hour)  Use Cases:     - Simple: Upload → confirm → object created automatically (default)     - Advanced: Upload multiple files with create_object_on_confirm=false,       then POST /buckets/{id}/objects with all upload_ids to create one object  Requirements:     - filename: REQUIRED, will be validated (no path traversal)     - content_type: REQUIRED, must be valid MIME type     - bucket_id: Comes from URL path parameter, not request body     - All other fields: OPTIONAL with sensible defaults  Note:     The bucket_id comes from the URL path (/v1/buckets/{bucket_id}/uploads),     not from the request body. The bucket is validated before generating presigned URL.

## Properties

Name | Type | Description | Notes
------------ | ------------- | ------------- | -------------
**filename** | **str** | Name of the file to upload. REQUIRED. Must be a valid filename without path traversal characters (../, \\). The filename is used to derive the blob_property if not explicitly provided. Examples: &#39;product_video.mp4&#39;, &#39;thumbnail.jpg&#39;, &#39;transcript.txt&#39; | 
**content_type** | **str** | MIME type of the file. REQUIRED. Must be a valid MIME type (e.g., &#39;video/mp4&#39;, &#39;image/jpeg&#39;, &#39;application/pdf&#39;). The presigned URL will enforce this content type during upload. Used to validate compatibility with bucket schema if create_object_on_confirm&#x3D;true. | 
**file_size_bytes** | **int** | Expected file size in bytes. OPTIONAL but RECOMMENDED. If provided, will be validated against: 1. Tier-based file size limits (100MB free, 5GB pro, 50GB enterprise) 2. Storage quota availability 3. Actual uploaded file size during confirmation. If not provided, quota checking is skipped until confirmation. | [optional] 
**presigned_url_expiration** | **int** | How long the presigned URL is valid, in seconds. OPTIONAL, defaults to 3600 (1 hour). Valid range: 60 seconds (1 minute) to 86400 seconds (24 hours). After expiration, the URL cannot be used and you must request a new one. Recommendation: Use shorter expiration (300-900 seconds) for security-sensitive files, longer expiration (3600-7200 seconds) for large files that take time to upload. | [optional] [default to 3600]
**metadata** | **object** | Custom metadata for tracking purposes. OPTIONAL. Stored with the upload record for filtering and analytics. Does NOT affect the created bucket object (use object_metadata for that). Common uses: campaign tracking, user identification, upload source. | [optional] 
**create_object_on_confirm** | **bool** | Whether to automatically create a bucket object when upload is confirmed. OPTIONAL, defaults to TRUE (object is created automatically). If true (default):   - Bucket MUST have a schema defined   - blob_property must exist in bucket schema   - content_type must match schema field type   - Validation happens BEFORE generating presigned URL   - Object is created automatically on confirmation. If false:   - Upload is confirmed but no object is created   - Use this when combining multiple uploads into one object   - Reference the upload_id later in POST /buckets/{id}/objects. | [optional] [default to True]
**object_metadata** | **object** | Metadata to attach to the created bucket object. OPTIONAL. Only used if create_object_on_confirm&#x3D;true. This metadata will be:   1. Validated against bucket schema (if keys match schema fields)   2. Attached to the bucket object   3. Passed to downstream documents in connected collections. Example: {&#39;priority&#39;: &#39;high&#39;, &#39;category&#39;: &#39;products&#39;, &#39;tags&#39;: [&#39;featured&#39;]} | [optional] 
**blob_property** | **str** | Property name for the blob in the bucket object. OPTIONAL. Defaults to filename without extension (e.g., &#39;product_video.mp4&#39; → &#39;product_video&#39;). If create_object_on_confirm&#x3D;true:   - Must exist in bucket schema   - Must be alphanumeric with underscores only   - Will be validated BEFORE generating presigned URL. Common values: &#39;video&#39;, &#39;image&#39;, &#39;thumbnail&#39;, &#39;transcript&#39;, &#39;content&#39;. | [optional] 
**blob_type** | **str** | Type of blob. OPTIONAL. Defaults to type derived from content_type (e.g., &#39;video/mp4&#39; → &#39;VIDEO&#39;). Must be a valid BucketSchemaFieldType if provided. Valid values: IMAGE, VIDEO, AUDIO, TEXT, PDF, DOCUMENT, etc. If create_object_on_confirm&#x3D;true, will be validated against bucket schema field type. | [optional] 
**file_hash** | **str** | SHA256 hash of the file content for duplicate detection. OPTIONAL. If provided:   - System checks for existing confirmed uploads with same hash   - If duplicate found and skip_duplicates&#x3D;true, returns existing upload   - Hash will be validated against actual S3 ETag during confirmation. If not provided:   - Hash is calculated from S3 ETag after upload   - Duplicate detection only happens during confirmation. Use case: Pre-calculate hash client-side to avoid uploading duplicates. Format: 64-character hexadecimal string (SHA256). | [optional] 
**skip_duplicates** | **bool** | Skip upload if a file with the same hash already exists. OPTIONAL, defaults to TRUE. If true (default):   - If file_hash provided: System checks MongoDB for existing completed upload with same hash   - If duplicate found: Returns existing upload details WITHOUT generating new presigned URL   - If file_hash NOT provided: Duplicate check happens during confirmation using S3 ETag   - Saves bandwidth, storage, and upload time by reusing existing files. If false:   - Always generates new presigned URL even if file already uploaded   - Creates separate upload record for same file content   - Useful when you need distinct upload tracking for identical files. Recommendation: Keep default (true) unless you specifically need multiple upload records for same file. | [optional] [default to True]

## Example

```python
from mixpeek.models.create_upload_request import CreateUploadRequest

# TODO update the JSON string below
json = "{}"
# create an instance of CreateUploadRequest from a JSON string
create_upload_request_instance = CreateUploadRequest.from_json(json)
# print the JSON string representation of the object
print(CreateUploadRequest.to_json())

# convert the object into a dict
create_upload_request_dict = create_upload_request_instance.to_dict()
# create an instance of CreateUploadRequest from a dict
create_upload_request_from_dict = CreateUploadRequest.from_dict(create_upload_request_dict)
```
[[Back to Model list]](../README.md#documentation-for-models) [[Back to API list]](../README.md#documentation-for-api-endpoints) [[Back to README]](../README.md)



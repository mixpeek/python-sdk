# StageParamsWebScrape

Configuration for web scrape (content fetching) stage.  **Stage Category**: ENRICH (1-1 Enrichment)  **Transformation**: N documents → N documents (same count, expanded schema)  **Purpose**: Fetches full web page content from URLs found in document fields. Uses the Engine's Playwright service to extract clean text, metadata, and HTML from web pages. Enriches documents with complete content beyond the snippets provided by search APIs like Exa.  **When to Use**:     - After web_search stage to fetch full content from search results     - When documents contain URLs that need content extraction     - For article/blog content aggregation     - To get full page text beyond API snippets     - For content analysis requiring complete text     - Web scraping as part of retrieval pipeline  **When NOT to Use**:     - When URL snippets/titles are sufficient (web_search provides these)     - For very large numbers of URLs (slow, browser-intensive)     - When content is behind authentication (Playwright can't authenticate)     - For dynamic content requiring complex interactions     - When speed is critical (browser rendering is slow: 2-5s per page)  **Operational Behavior**:     - Enriches each input document (1-1 operation)     - Maintains document count: N in → N out (or fewer with REMOVE error handling)     - Expands schema: adds web content fields to each document     - Makes HTTP requests to Engine Playwright service     - Slow operation: 100ms-5s per document depending on strategy     - Supports concurrent requests with configurable batch size     - Browser-intensive for JavaScript strategy  **Common Pipeline Position**:     - web_search → web_scrape (get snippets then full content)     - semantic_search → web_scrape (if docs have URLs)     - filter → web_scrape → llm_enrich (fetch then analyze)  **Cost & Performance**:     - Expensive: Browser rendering is resource-intensive     - Slow: 2-5s per page for JavaScript, 100-500ms for static     - Use STATIC strategy when possible for speed     - Use conditional enrichment (when parameter) to reduce load     - Consider batch_size for balancing speed vs resource usage  **Conditional Enrichment**: Supports `when` parameter to only fetch content for specific documents. CRITICAL FOR PERFORMANCE - web scraping is slow!     - Only fetch for high-scoring results     - Only fetch specific content types     - Only fetch when URL field is present  Requirements:     - url_field: REQUIRED, document field containing URL to fetch     - output_field: REQUIRED, where to store fetched content     - strategy: OPTIONAL, scraping strategy (static/javascript/auto, default: auto)     - timeout: OPTIONAL, request timeout in seconds (default: 10)     - include_html: OPTIONAL, include raw HTML in response (default: False)     - min_content_length: OPTIONAL, minimum content length for auto fallback (default: 500)     - when: OPTIONAL but RECOMMENDED for performance     - on_error: OPTIONAL, error handling strategy (skip/remove/raise, default: skip)     - batch_size: OPTIONAL, concurrent requests (default: 5)  Use Cases:     - Content aggregation: Fetch full articles after web search     - Research pipelines: Get complete documents for analysis     - Content monitoring: Scrape pages for change detection     - Data enrichment: Add full page text to search results     - Competitive analysis: Fetch competitor content     - News aggregation: Get full articles from headlines  Examples:     Basic web scrape after search:         ```json         {             \"url_field\": \"metadata.url\",             \"output_field\": \"metadata.full_content\",             \"strategy\": \"auto\"         }         ```      Fast static scraping:         ```json         {             \"url_field\": \"metadata.url\",             \"output_field\": \"metadata.content\",             \"strategy\": \"static\",             \"timeout\": 5,             \"on_error\": \"skip\"         }         ```      JavaScript SPA scraping:         ```json         {             \"url_field\": \"metadata.url\",             \"output_field\": \"metadata.rendered_content\",             \"strategy\": \"javascript\",             \"timeout\": 30,             \"include_html\": true         }         ```      Conditional scrape (only high scores):         ```json         {             \"url_field\": \"metadata.url\",             \"output_field\": \"metadata.full_text\",             \"strategy\": \"auto\",             \"when\": {                 \"field\": \"score\",                 \"operator\": \"gte\",                 \"value\": 0.8             },             \"batch_size\": 3         }         ```

## Properties

Name | Type | Description | Notes
------------ | ------------- | ------------- | -------------
**url** | **str** | Direct URL to fetch (supports templates like &#39;{{inputs.url}}&#39;). Use this when you want to scrape a URL from inputs without needing existing documents. Creates a new document with the scraped content. Either &#39;url&#39; or &#39;url_field&#39; must be provided, but not both. | [optional] [default to 'null']
**url_field** | **str** | Dot-path to document field containing URL to fetch. Use this when enriching existing documents that have URL fields. Supports nested paths like &#39;metadata.url&#39; or &#39;data.source.link&#39;. The field must contain a valid HTTP/HTTPS URL. If field is missing or URL is invalid, behavior depends on on_error setting. Either &#39;url&#39; or &#39;url_field&#39; must be provided, but not both. | [optional] [default to 'metadata.url']
**output_field** | **str** | Dot-path where fetched content should be stored. Creates nested structure if path doesn&#39;t exist. Stores object with: text, title, url, final_url, content_length, metadata, strategy_used. Example: &#39;metadata.web_content&#39; creates doc.metadata.web_content.text, doc.metadata.web_content.title, etc. | [optional] [default to 'metadata.web_content']
**strategy** | **str** | OPTIONAL. Scraping strategy to use. &#39;static&#39;: Fast HTML parsing, no JavaScript (best for articles/blogs). &#39;javascript&#39;: Full browser rendering (slow, required for SPAs). &#39;auto&#39;: Try static first, fallback to JavaScript if needed. Default is &#39;auto&#39; for best balance of speed and completeness. | [optional] [default to 'auto']
**timeout** | **int** | OPTIONAL. Request timeout in seconds. Range: 1-60 seconds. Default is 10. JavaScript rendering may need higher timeouts (20-30s). Shorter timeouts fail faster but may miss slow-loading pages. | [optional] [default to 10]
**include_html** | **bool** | OPTIONAL. Include raw HTML in output. Default is False. Set to True if you need HTML for custom parsing. Warning: Significantly increases response size and memory usage. | [optional] [default to False]
**min_content_length** | **int** | OPTIONAL. Minimum content length (characters) for auto strategy. If static parsing yields less than this, fallback to JavaScript. Default is 500 characters. Higher values &#x3D; more likely to use JavaScript. Range: 100+. | [optional] [default to 500]
**when** | [**LogicalOperator**](LogicalOperator.md) | OPTIONAL. Conditional filter that documents must satisfy to be enriched with web content. Uses LogicalOperator (AND/OR/NOT) for complex boolean logic, or simple field/operator/value for single conditions. Documents NOT matching this condition will SKIP enrichment (pass-through unchanged). CRITICAL FOR PERFORMANCE - web scraping is slow! Only fetch content for documents that need it. When NOT specified, ALL documents are enriched unconditionally (may be very slow).   Use cases: - Only fetch for high-scoring results (score &gt;&#x3D; 0.8) - Only fetch specific content types (category &#x3D; &#39;article&#39;) - Only fetch when URL field is present   Simple condition example: {\&quot;field\&quot;: \&quot;score\&quot;, \&quot;operator\&quot;: \&quot;gte\&quot;, \&quot;value\&quot;: 0.8} Boolean AND example: {\&quot;AND\&quot;: [{\&quot;field\&quot;: \&quot;metadata.category\&quot;, \&quot;operator\&quot;: \&quot;eq\&quot;, \&quot;value\&quot;: \&quot;article\&quot;}, ...]}  | [optional] 
**on_error** | [**ErrorHandling**](ErrorHandling.md) | OPTIONAL. How to handle fetch errors. &#39;skip&#39;: Skip failed documents, pass them through unchanged (default). &#39;remove&#39;: Remove failed documents from results entirely. &#39;raise&#39;: Raise exception on first failure, halt pipeline. Default is &#39;skip&#39; for fault tolerance. | [optional] 
**batch_size** | **int** | OPTIONAL. Number of concurrent fetch requests. Range: 1-20. Default is 5. Higher values &#x3D; faster but more resource intensive. Lower values &#x3D; slower but safer for rate limits. Consider Engine resource capacity when setting. | [optional] [default to 5]
**max_depth** | **int** | OPTIONAL. Maximum link depth to follow from seed URL. None &#x3D; single URL mode (default behavior). 0 &#x3D; only seed page. 1 &#x3D; seed + direct links from seed. 2 &#x3D; seed + links + links from those pages. Higher values exponentially increase crawl time. Recommended: 1-2 for most use cases. | [optional] [default to null]
**max_pages** | **int** | OPTIONAL. Maximum total pages to crawl. None &#x3D; single URL mode (default behavior). Crawling stops when this limit is reached regardless of depth. Acts as a safety limit to prevent runaway crawls. Range: 1-100. | [optional] [default to null]
**same_domain_only** | **bool** | OPTIONAL. Only follow links to the same domain as seed URL. Default is True (strongly recommended). Set to False only for intentional cross-domain crawling. Prevents crawl explosion to external sites. | [optional] [default to True]
**url_patterns** | [**URLPatterns**](URLPatterns.md) | OPTIONAL. Include/exclude regex patterns for filtering discovered URLs. Include patterns: URLs must match at least one (if provided). Exclude patterns: URLs matching any are skipped. Applied after same_domain_only filter. Example: {&#39;include&#39;: [&#39;/docs/.*&#39;], &#39;exclude&#39;: [&#39;/login&#39;, &#39;/admin/.*&#39;]} | [optional] 
**delay_between_requests** | **float** | OPTIONAL. Delay in seconds between starting new requests (politeness). Helps avoid overwhelming target servers. 0 &#x3D; no delay (use with caution). Default is 0.5 seconds. Recommended: 0.5-1.0 for most sites. | [optional] [default to 0.5]

## Example

```python
from mixpeek.models.stage_params_web_scrape import StageParamsWebScrape

# TODO update the JSON string below
json = "{}"
# create an instance of StageParamsWebScrape from a JSON string
stage_params_web_scrape_instance = StageParamsWebScrape.from_json(json)
# print the JSON string representation of the object
print(StageParamsWebScrape.to_json())

# convert the object into a dict
stage_params_web_scrape_dict = stage_params_web_scrape_instance.to_dict()
# create an instance of StageParamsWebScrape from a dict
stage_params_web_scrape_from_dict = StageParamsWebScrape.from_dict(stage_params_web_scrape_dict)
```
[[Back to Model list]](../README.md#documentation-for-models) [[Back to API list]](../README.md#documentation-for-api-endpoints) [[Back to README]](../README.md)



# StageDefinition

Model for retriever stage definition that describes how to process and search documents.


## Fields

| Field                                                                                                                                              | Type                                                                                                                                               | Required                                                                                                                                           | Description                                                                                                                                        |
| -------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- |
| `stage_name`                                                                                                                                       | *str*                                                                                                                                              | :heavy_check_mark:                                                                                                                                 | Unique name identifying the stage type (e.g., 'knn_search', 'face_search')                                                                         |
| `description`                                                                                                                                      | *str*                                                                                                                                              | :heavy_check_mark:                                                                                                                                 | Human-readable explanation of what the stage does                                                                                                  |
| `version`                                                                                                                                          | *str*                                                                                                                                              | :heavy_check_mark:                                                                                                                                 | Version string for the stage definition (e.g., '1.0.0')                                                                                            |
| `input_schema`                                                                                                                                     | Dict[str, [models.BucketSchemaFieldOutput](../models/bucketschemafieldoutput.md)]                                                                  | :heavy_check_mark:                                                                                                                                 | Defines the data structure required from the retriever's overall input query                                                                       |
| `output_schema`                                                                                                                                    | Dict[str, [models.BucketSchemaFieldOutput](../models/bucketschemafieldoutput.md)]                                                                  | :heavy_check_mark:                                                                                                                                 | Defines the data structure produced by this stage                                                                                                  |
| `parameter_schema`                                                                                                                                 | Dict[str, [models.BucketSchemaFieldOutput](../models/bucketschemafieldoutput.md)]                                                                  | :heavy_check_mark:                                                                                                                                 | Defines the configurable parameters accepted by this stage instance (e.g., thresholds, limits)                                                     |
| `supported_input_types`                                                                                                                            | List[*str*]                                                                                                                                        | :heavy_check_mark:                                                                                                                                 | List of general data types the stage can process (e.g., ['text', 'vector'])                                                                        |
| `max_inputs`                                                                                                                                       | Dict[str, *int*]                                                                                                                                   | :heavy_check_mark:                                                                                                                                 | Specifies the maximum number of inputs allowed per type (e.g., {'text': 1})                                                                        |
| `max_total_inputs`                                                                                                                                 | *OptionalNullable[int]*                                                                                                                            | :heavy_minus_sign:                                                                                                                                 | Specifies the maximum total number of inputs allowed across all types defined in input_schema (e.g., 1 means only one input field can be provided) |
| `required_vector_indexes`                                                                                                                          | List[[models.VectorIndexDefinition](../models/vectorindexdefinition.md)]                                                                           | :heavy_minus_sign:                                                                                                                                 | List of vector index configurations that must exist in the target collections for this stage to function                                           |
| `required_payload_indexes`                                                                                                                         | List[*Any*]                                                                                                                                        | :heavy_minus_sign:                                                                                                                                 | List of payload index configurations (e.g., for specific field filtering) required in the target collections                                       |
| `supported_filters`                                                                                                                                | List[*str*]                                                                                                                                        | :heavy_minus_sign:                                                                                                                                 | List of filter operations supported by this stage (e.g., ['=', '>', '<'])                                                                          |